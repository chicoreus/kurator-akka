imports:

- classpath:/org/kurator/akka/actors.yaml
- classpath:/org/kurator/akka/jython/jython_actors.yaml

components:

- id: CsvReader
  type: CsvFileReader

- id: JythonRecordFilter
  type: JythonFunctionActor
  properties:
    script: src/test/resources/org/kurator/akka/jython/record_filter.py
    onData: filter
    parameters:
      outputTypeIsInputType: true
    listensTo:
      - !ref CsvReader

- id: CsvWriter
  type: CsvFileWriter
  properties:
    listensTo:
      - !ref JythonRecordFilter

- id: CsvRecordFilter
  type: Workflow
  properties:
    actors:
      - !ref CsvReader
      - !ref JythonRecordFilter
      - !ref CsvWriter
    parameters:
      in:
        actor: !ref CsvReader
        parameter: filePath
      out:
        actor: !ref CsvWriter
        parameter: filePath